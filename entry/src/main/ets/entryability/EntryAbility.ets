/**
 * ğŸš€ åº”ç”¨å…¥å£èƒ½åŠ›ç±» (EntryAbility)
 * 
 * è¿™æ˜¯é¸¿è’™åº”ç”¨çš„ä¸»å…¥å£ï¼Œè´Ÿè´£ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ
 * ç»§æ‰¿è‡ªUIAbilityï¼Œæ˜¯åº”ç”¨ä¸ç³»ç»Ÿäº¤äº’çš„æ ¸å¿ƒç»„ä»¶
 * 
 * ä¸»è¦èŒè´£ï¼š
 * - åº”ç”¨å¯åŠ¨å’Œé”€æ¯ç®¡ç†
 * - çª—å£åˆ›å»ºå’Œé…ç½®
 * - å‰åå°åˆ‡æ¢å¤„ç†
 * - ç³»ç»Ÿäº‹ä»¶å“åº”
 */

import { AbilityConstant, ConfigurationConstant, UIAbility, Want } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { window } from '@kit.ArkUI';

// æ—¥å¿—åŸŸæ ‡è¯†ç¬¦ï¼Œç”¨äºè¿‡æ»¤å’Œåˆ†ç±»æ—¥å¿—
const DOMAIN = 0x0000;

/**
 * åº”ç”¨å…¥å£èƒ½åŠ›ç±»
 * 
 * ğŸ”¥ æ ¸å¿ƒæ¦‚å¿µï¼š
 * - UIAbilityï¼šé¸¿è’™åº”ç”¨çš„åŸºæœ¬è¿è¡Œå•å…ƒ
 * - ç”Ÿå‘½å‘¨æœŸï¼šonCreate â†’ onWindowStageCreate â†’ onForeground â†’ onBackground â†’ onDestroy
 * - Wantï¼šåº”ç”¨å¯åŠ¨æ„å›¾ï¼ŒåŒ…å«å¯åŠ¨ä¿¡æ¯
 */
export default class EntryAbility extends UIAbility {
  
  /**
   * ğŸ“± åº”ç”¨åˆ›å»ºå›è°ƒ
   * 
   * å½“åº”ç”¨é¦–æ¬¡å¯åŠ¨æ—¶è°ƒç”¨ï¼Œç”¨äºåº”ç”¨çº§åˆ«çš„åˆå§‹åŒ–
   * 
   * @param want - å¯åŠ¨æ„å›¾ï¼ŒåŒ…å«å¯åŠ¨åº”ç”¨çš„ç›¸å…³ä¿¡æ¯
   * @param launchParam - å¯åŠ¨å‚æ•°ï¼ŒåŒ…å«å¯åŠ¨ç±»å‹ç­‰ä¿¡æ¯
   */
  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
    // è®¾ç½®åº”ç”¨çš„é¢œè‰²æ¨¡å¼ä¸ºæœªè®¾ç½®çŠ¶æ€ï¼Œè·Ÿéšç³»ç»Ÿ
    this.context.getApplicationContext().setColorMode(ConfigurationConstant.ColorMode.COLOR_MODE_NOT_SET);
    hilog.info(DOMAIN, 'testTag', '%{public}s', 'âœ… åº”ç”¨åˆ›å»ºæˆåŠŸ - Ability onCreate');
  }

  /**
   * ğŸ—‘ï¸ åº”ç”¨é”€æ¯å›è°ƒ
   * 
   * å½“åº”ç”¨è¢«ç³»ç»Ÿé”€æ¯æ—¶è°ƒç”¨ï¼Œç”¨äºæ¸…ç†èµ„æº
   */
  onDestroy(): void {
    hilog.info(DOMAIN, 'testTag', '%{public}s', 'ğŸ”š åº”ç”¨é”€æ¯ - Ability onDestroy');
  }

  /**
   * ğŸªŸ çª—å£é˜¶æ®µåˆ›å»ºå›è°ƒ
   * 
   * å½“ä¸»çª—å£åˆ›å»ºå®Œæˆæ—¶è°ƒç”¨ï¼Œè¿™æ˜¯è®¾ç½®é¡µé¢å†…å®¹çš„æœ€ä½³æ—¶æœº
   * 
   * @param windowStage - çª—å£èˆå°å¯¹è±¡ï¼Œç”¨äºç®¡ç†çª—å£å’Œé¡µé¢
   */
  onWindowStageCreate(windowStage: window.WindowStage): void {
    hilog.info(DOMAIN, 'testTag', '%{public}s', 'ğŸªŸ çª—å£é˜¶æ®µåˆ›å»º - onWindowStageCreate');

    // åŠ è½½ä¸»é¡µé¢å†…å®¹ - è¿™é‡ŒæŒ‡å®šäº†åº”ç”¨çš„å…¥å£é¡µé¢
    windowStage.loadContent('pages/Index', (err) => {
      if (err.code) {
        hilog.error(DOMAIN, 'testTag', 'âŒ é¡µé¢åŠ è½½å¤±è´¥: %{public}s', JSON.stringify(err));
        return;
      }
      hilog.info(DOMAIN, 'testTag', '%{public}s', 'âœ… é¡µé¢åŠ è½½æˆåŠŸ');
    });
  }

  /**
   * ğŸªŸ çª—å£é˜¶æ®µé”€æ¯å›è°ƒ
   * 
   * å½“ä¸»çª—å£é”€æ¯æ—¶è°ƒç”¨ï¼Œç”¨äºé‡Šæ”¾UIç›¸å…³èµ„æº
   */
  onWindowStageDestroy(): void {
    hilog.info(DOMAIN, 'testTag', '%{public}s', 'ğŸªŸ çª—å£é˜¶æ®µé”€æ¯ - onWindowStageDestroy');
  }

  /**
   * â¬†ï¸ åº”ç”¨å‰å°å›è°ƒ
   * 
   * å½“åº”ç”¨ä»åå°åˆ‡æ¢åˆ°å‰å°æ—¶è°ƒç”¨
   */
  onForeground(): void {
    hilog.info(DOMAIN, 'testTag', '%{public}s', 'â¬†ï¸ åº”ç”¨åˆ‡æ¢åˆ°å‰å° - onForeground');
  }

  /**
   * â¬‡ï¸ åº”ç”¨åå°å›è°ƒ
   * 
   * å½“åº”ç”¨ä»å‰å°åˆ‡æ¢åˆ°åå°æ—¶è°ƒç”¨
   */
  onBackground(): void {
    hilog.info(DOMAIN, 'testTag', '%{public}s', 'â¬‡ï¸ åº”ç”¨åˆ‡æ¢åˆ°åå° - onBackground');
  }
}