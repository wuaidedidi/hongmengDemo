import router from '@ohos.router';
// Index.ets

// å¾…åŠé¡¹æ•°æ®ç±»å‹å®šä¹‰
class TodoItem {
  id: number
  title: string
  type: string
  createTime: string
  isCompleted: boolean
  focusCount: number = 0
  focusDuration: number = 0
  targetDate: string = '2025-05-14'
  remainDays: number = 1

  constructor(id: number, title: string, type: string) {
    this.id = id
    this.title = title
    this.type = type
    this.isCompleted = false
    
    // è®¾ç½®åˆ›å»ºæ—¶é—´
    const now = new Date()
    this.createTime = `${now.getFullYear()}å¹´${now.getMonth() + 1}æœˆ${now.getDate()}æ—¥`
  }
}

@Entry
@Component
struct Index {
  @State currentIndex: number = 0;
  // ä½¿ç”¨ä¸€ä¸ªåŠé€æ˜çš„ç²‰è‰²èƒŒæ™¯è‰²
  @State bgColor: string = 'rgba(255, 192, 203, 0.15)';
  @State isDialogShow: boolean = false;
  @State todoName: string = '';
  @State todoType: string = 'ç™½å…”é’Ÿ'; // é»˜è®¤ç±»å‹
  @State isClockInMenuShow: boolean = false; // æ‰“å¡èœå•æ˜¯å¦æ˜¾ç¤º
  @State isClockInStatsShow: boolean = false; // ä¸“æ³¨æ—¶é•¿æ‰“å¡ç»Ÿè®¡æ˜¯å¦æ˜¾ç¤º
  @State isPermissionDialogShow: boolean = false; // æƒé™è®¾ç½®å¯¹è¯æ¡†æ˜¯å¦æ˜¾ç¤º
  @State todoItems: TodoItem[] = [
    new TodoItem(1, 'å¤§ç™½çŒª', 'ç™½å…”é’Ÿ'),
    new TodoItem(2, 'åŠ³é€¸ç»“åˆ', 'å®šç›®æ ‡'),
    new TodoItem(3, 'å­¦ä¹ è®¡åˆ’', 'å…»ä¹ æƒ¯'),
    new TodoItem(4, 'å·¥ä½œä»»åŠ¡', 'å®šç›®æ ‡')
  ]; // å¾…åŠé¡¹åˆ—è¡¨
  @State selectedTodoId: number = -1; // å½“å‰é€‰ä¸­çš„å¾…åŠé¡¹ID
  @State isOperationMenuShow: boolean = false; // æ“ä½œèœå•æ˜¯å¦æ˜¾ç¤º
  private nextId: number = 5; // ä¸‹ä¸€ä¸ªå¾…åŠé¡¹ID

  aboutToAppear() {
    // æ£€æŸ¥æ˜¯å¦æœ‰ä»å…¶ä»–é¡µé¢è¿”å›çš„å‚æ•°
    const params = router.getParams();
    if (params) {
      const paramsObj = params as Record<string, string | number>;
      if (paramsObj.action === 'delete' && paramsObj.todoId !== undefined) {
        const todoId = paramsObj.todoId as number;
        const index = this.todoItems.findIndex(item => item.id === todoId);
        if (index >= 0) {
          this.todoItems.splice(index, 1);
        }
      }
    }
  }

  build() {
    Stack() {
      // æ•´é¡µèƒŒæ™¯
      Column()
        .width('100%')
        .height('100%')
        .backgroundColor(this.bgColor)
      
      Column() {
        // é¡¶éƒ¨æ ‡é¢˜æ 
        Row() {
          Text('å¾…åŠ')
            .fontSize(22)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FFFFFF')
          
          Blank()
          
          Row({ space: 16 }) {
            Row() {
              Text('å¿…å¼€')
                .fontSize(14)
                .fontColor('#FFFFFF')
              Text('æƒé™')
                .fontSize(14)
                .fontColor('#FFFFFF')
            }
            .backgroundColor('rgba(255, 255, 255, 0.2)')
            .borderRadius(12)
            .padding({ left: 8, right: 8, top: 4, bottom: 4 })
            .margin({ right: 4 })
            .onClick(() => {
              this.isPermissionDialogShow = true;
            })
            
            Text('âœ“')
              .fontSize(24)
              .fontColor('#FFFFFF')
              .onClick(() => {
                this.isClockInMenuShow = true;
              })
            Text('+')
              .fontSize(24)
              .fontColor('#FFFFFF')
              .onClick(() => {
                this.isDialogShow = true;
              })
            Text('â‰¡').fontSize(24).fontColor('#FFFFFF')
          }
        }
        .width('100%')
        .height(50)
        .padding({ left: 16, right: 16 })
        .linearGradient({
          angle: 90,
          colors: [['#8A2BE2', 0.0], ['#FF1493', 1.0]]
        })
        
        // ä»»åŠ¡åˆ—è¡¨éƒ¨åˆ†
        Column() {
          // åˆ—è¡¨å¡ç‰‡
          Column({ space: 16 }) {
            // å¾ªç¯æ¸²æŸ“å¾…åŠé¡¹
            ForEach(this.todoItems, (item: TodoItem) => {
              Row() {
                Column() {
                  Text(item.title)
                    .fontSize(22)
                    .fontWeight(FontWeight.Bold)
                    .fontColor('#222222')
                }
                .alignItems(HorizontalAlign.Start)
                .layoutWeight(1)
                
                if (item.type === 'ç™½å…”é’Ÿ') {
                  Text('ğŸ“Š').fontSize(24).margin({ right: 8 })
                  Text('âš™ï¸').fontSize(24).margin({ right: 8 })
                  Text('â•').fontSize(24)
                } else {
                  Text('â±ï¸').fontSize(24).margin({ right: 8 })
                  Text('âœï¸').fontSize(24).margin({ right: 8 })
                  Text('âœ“').fontSize(24)
                }
              }
              .height(60)
              .width('100%')
              .backgroundColor('#FFFFFF')
              .borderRadius(8)
              .padding({ left: 16, right: 16 })
              .alignItems(VerticalAlign.Center)
              .margin({ top: 8, left: 8, right: 8 })
              .gesture(
                LongPressGesture()
                  .onAction(() => {
                    router.pushUrl({
                      url: 'pages/TodoOperation',
                      params: {
                        todoId: item.id
                      }
                    });
                  })
              )
            })
          }
          .width('100%')
          
          // æµ®åŠ¨æŒ‰é’®æç¤º
          Row() {
            Text('åŒå‡»ç¼–è¾‘ AI ç»„ä»¶')
              .fontSize(16)
              .fontColor('#FFFFFF')
              .fontWeight(FontWeight.Medium)
          }
          .backgroundColor('rgba(138, 43, 226, 0.8)')
          .borderRadius(24)
          .padding({ left: 16, right: 16, top: 10, bottom: 10 })
          .position({ x: '30%', y: '50%' })
        }
        .width('100%')
        .layoutWeight(1)
        .padding(16)
        
        // åº•éƒ¨å¯¼èˆªæ 
        Row() {
          Column() {
            Text('ğŸ“…').fontSize(24)
            Text('å¾…åŠ').fontSize(12).margin({ top: 4 }).fontColor('#8A2BE2')
          }.layoutWeight(1).justifyContent(FlexAlign.Center)
          
          Column() {
            Text('ğŸ“').fontSize(24)
            Text('å¾…åŠäº‹é¡¹').fontSize(12).margin({ top: 4 })
          }.layoutWeight(1).justifyContent(FlexAlign.Center)
          .onClick(() => {
            router.push({ url: 'pages/TodoDetail' });
          })
          
          Column() {
            Text('ğŸ”’').fontSize(24)
            Text('é”æœº').fontSize(12).margin({ top: 4 })
          }.layoutWeight(1).justifyContent(FlexAlign.Center)
          .onClick(() => {
            router.push({ url: 'pages/LockPage' });
          })
          
          Column() {
            Text('ğŸ“Š').fontSize(24)
            Text('ç»Ÿè®¡æ•°æ®').fontSize(12).margin({ top: 4 })
          }.layoutWeight(1).justifyContent(FlexAlign.Center)
          .onClick(() => {
            router.push({ url: 'pages/StatisticsPage' });
          })
          
          Column() {
            Text('ğŸ‘¤').fontSize(24)
            Text('æˆ‘çš„').fontSize(12).margin({ top: 4 })
          }.layoutWeight(1).justifyContent(FlexAlign.Center)
          .onClick(() => {
            router.push({ url: 'pages/ProfilePage' });
          })
        }
        .height(56)
        .width('100%')
        .backgroundColor('#FFFFFF')
        .border({ width: { top: 1 }, color: { top: '#E0E0E0' } })
      }
      .width('100%')
      .height('100%')
      
      // æ·»åŠ å¾…åŠå¼¹çª—
      if (this.isDialogShow) {
        Column() {
          Column() {
            // å¼¹çª—æ ‡é¢˜
            Text('æ·»åŠ å¾…åŠ')
              .fontSize(18)
              .fontWeight(FontWeight.Bold)
              .margin({ top: 16, bottom: 20 })
            
            // è¾“å…¥æ¡†
            TextInput({ placeholder: 'è¯·è¾“å…¥å¾…åŠåç§°' })
              .width('90%')
              .height(50)
              .fontSize(16)
              .placeholderFont({ size: 16 })
              .borderRadius(8)
              .backgroundColor('#F5F5F5')
              .padding({ left: 16, right: 16 })
              .margin({ bottom: 20 })
              .onChange((value: string) => {
                this.todoName = value;
              })
            
            // ç¬¬ä¸€è¡ŒæŒ‰é’®
            Row({ space: 12 }) {
              Button('ç™½å…”é’Ÿ')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor(this.todoType === 'ç™½å…”é’Ÿ' ? '#8A2BE2' : '#F5F5F5')
                .fontColor(this.todoType === 'ç™½å…”é’Ÿ' ? '#FFFFFF' : '#333333')
                .onClick(() => {
                  this.todoType = 'ç™½å…”é’Ÿ';
                })
              
              Button('å®šç›®æ ‡')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor(this.todoType === 'å®šç›®æ ‡' ? '#8A2BE2' : '#F5F5F5')
                .fontColor(this.todoType === 'å®šç›®æ ‡' ? '#FFFFFF' : '#333333')
                .onClick(() => {
                  this.todoType = 'å®šç›®æ ‡';
                })
              
              Button('å…»ä¹ æƒ¯')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor(this.todoType === 'å…»ä¹ æƒ¯' ? '#8A2BE2' : '#F5F5F5')
                .fontColor(this.todoType === 'å…»ä¹ æƒ¯' ? '#FFFFFF' : '#333333')
                .onClick(() => {
                  this.todoType = 'å…»ä¹ æƒ¯';
                })
            }
            .width('90%')
            .margin({ bottom: 12 })
            
            // ç¬¬äºŒè¡ŒæŒ‰é’®
            Row({ space: 12 }) {
              Button('å€’è®¡æ—¶')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
              
              Button('æ­£å‘è®¡æ—¶')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
              
              Button('ä¸è®¡æ—¶')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
            }
            .width('90%')
            .margin({ bottom: 12 })
            
            // ç¬¬ä¸‰è¡ŒæŒ‰é’®
            Row({ space: 12 }) {
              Button('25åˆ†é’Ÿ')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
              
              Button('35åˆ†é’Ÿ')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
              
              Button('è‡ªå®šä¹‰')
                .height(40)
                .layoutWeight(1)
                .borderRadius(8)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
            }
            .width('90%')
            .margin({ bottom: 16 })
            
            // ç¡®è®¤å’Œå–æ¶ˆæŒ‰é’®
            Row({ space: 16 }) {
              Button('å–æ¶ˆ')
                .width('40%')
                .height(45)
                .borderRadius(22)
                .backgroundColor('#F5F5F5')
                .fontColor('#333333')
                .onClick(() => {
                  this.isDialogShow = false;
                })
              
              Button('ç¡®è®¤')
                .width('40%')
                .height(45)
                .borderRadius(22)
                .backgroundColor('#8A2BE2')
                .fontColor('#FFFFFF')
                .onClick(() => {
                  // æ·»åŠ æ–°å¾…åŠé¡¹
                  if (this.todoName.trim().length > 0) {
                    const newTodo = new TodoItem(this.nextId++, this.todoName, this.todoType);
                    this.todoItems.push(newTodo);
                    this.todoName = '';
                    this.todoType = 'ç™½å…”é’Ÿ';
                  }
                  this.isDialogShow = false;
                })
            }
            .margin({ bottom: 16 })
          }
          .width('85%')
          .backgroundColor('#FFFFFF')
          .borderRadius(16)
          .padding({ top: 10, bottom: 10 })
          .alignItems(HorizontalAlign.Center)
        }
        .width('100%')
        .height('100%')
        .backgroundColor('rgba(0, 0, 0, 0.5)')
        .justifyContent(FlexAlign.Center)
        .onClick(() => {
          this.isDialogShow = false;
        })
      }
      
      // æ‰“å¡èœå•
      if (this.isClockInMenuShow) {
        Column() {
          Column() {
            // æ‰“å¡é€‰é¡¹
            Text('æ—©èµ·æ‰“å¡')
              .fontSize(18)
              .fontWeight(FontWeight.Medium)
              .width('100%')
              .padding(16)
              .borderRadius({ topLeft: 16, topRight: 16 })
              .backgroundColor('#FFFFFF')
              .onClick(() => {
                // å¤„ç†æ—©èµ·æ‰“å¡é€»è¾‘
                this.isClockInMenuShow = false;
              })
            
            Divider().color('#EEEEEE').height(1)
            
            Text('ä»Šæ—¥ä¸“æ³¨æ—¶é•¿æ‰“å¡')
              .fontSize(18)
              .fontWeight(FontWeight.Medium)
              .width('100%')
              .padding(16)
              .backgroundColor('#FFFFFF')
              .onClick(() => {
                this.isClockInMenuShow = false;
                this.isClockInStatsShow = true; // æ˜¾ç¤ºä¸“æ³¨æ—¶é•¿ç»Ÿè®¡
              })
            
            Divider().color('#EEEEEE').height(1)
            
            Text('ç¡çœ æ‰“å¡')
              .fontSize(18)
              .fontWeight(FontWeight.Medium)
              .width('100%')
              .padding(16)
              .borderRadius({ bottomLeft: 16, bottomRight: 16 })
              .backgroundColor('#FFFFFF')
              .onClick(() => {
                // å¤„ç†ç¡çœ æ‰“å¡é€»è¾‘
                this.isClockInMenuShow = false;
              })
          }
          .width('80%')
          .margin(16)
          .position({ x: '10%', y: '6%' })
        }
        .width('100%')
        .height('100%')
        .backgroundColor('rgba(0, 0, 0, 0.5)')
        .onClick(() => {
          this.isClockInMenuShow = false;
        })
      }
      
      // æƒé™è®¾ç½®å¯¹è¯æ¡†
      if (this.isPermissionDialogShow) {
        Column() {
          Column() {
            // æ ‡é¢˜å’Œå…³é—­æŒ‰é’®
            Row() {
              Text('è¯·ä¾æ¬¡å…¨éƒ¨å¼€å¯~')
                .fontSize(22)
                .fontWeight(FontWeight.Bold)
                .fontColor('#E74C3C')
              
              Blank()
              
              Text('âœ–')
                .fontSize(22)
                .fontColor('#666666')
                .onClick(() => {
                  this.isPermissionDialogShow = false;
                })
            }
            .width('100%')
            .padding({ left: 16, right: 16, top: 16, bottom: 8 })
            
            // æƒé™è¯´æ˜
            Text('è‹¥ä¸è®¾ç½®ï¼Œè®¡æ—¶æˆ–é”æœºä¼šè¢«ç³»ç»Ÿä¼‘çœ è€Œæ— æ³•æ­£å¸¸è¿è¡Œ')
              .fontSize(16)
              .fontColor('#333333')
              .margin({ bottom: 8 })
              .padding({ left: 16, right: 16 })
              .width('100%')
              .textAlign(TextAlign.Start)
            
            Text('è¯·ä¸¥æ ¼æŒ‰æç¤ºè®¾ç½®æƒé™ï¼Œä¸è¦è‡ªå·±å»æ‰¾æƒé™å“¦ï¼Œè‡ªå·±æ‰¾å¾ˆå¯èƒ½æ‰¾ä¸å…¨å“¦')
              .fontSize(16)
              .fontColor('#333333')
              .margin({ bottom: 24 })
              .padding({ left: 16, right: 16 })
              .width('100%')
              .textAlign(TextAlign.Start)
            
            // ç¬¬ä¸€ä¸ªæƒé™é€‰é¡¹
            Column() {
              Text('è®¾ç½®å…è®¸åå°è¿è¡Œ')
                .fontSize(18)
                .fontWeight(FontWeight.Medium)
                .fontColor('#03A9F4')
                .width('100%')
                .textAlign(TextAlign.Start)
                .margin({ bottom: 4 })
              
              Text('é˜²æ­¢é”å±åè¢«ä¼‘çœ ï¼Œä½¿æé†’æ›´åŠ åŠæ—¶')
                .fontSize(14)
                .fontColor('#666666')
                .width('100%')
                .textAlign(TextAlign.Start)
            }
            .width('100%')
            .backgroundColor('#E3F2FD')
            .borderRadius(8)
            .padding(16)
            .margin({ bottom: 12, left: 16, right: 16 })
            .onClick(() => {
              // å¤„ç†æƒé™è®¾ç½®é€»è¾‘
            })
            
            // ç¬¬äºŒä¸ªæƒé™é€‰é¡¹
            Column() {
              Text('è®¾ç½®å…è®¸å¯åŠ¨')
                .fontSize(18)
                .fontWeight(FontWeight.Medium)
                .fontColor('#03A9F4')
                .width('100%')
                .textAlign(TextAlign.Start)
                .margin({ bottom: 4 })
              
              Text('å…è®¸å¯åŠ¨å®šæ—¶æé†’æˆ–é”æœºç•Œé¢')
                .fontSize(14)
                .fontColor('#666666')
                .width('100%')
                .textAlign(TextAlign.Start)
            }
            .width('100%')
            .backgroundColor('#E3F2FD')
            .borderRadius(8)
            .padding(16)
            .margin({ bottom: 12, left: 16, right: 16 })
            .onClick(() => {
              // å¤„ç†æƒé™è®¾ç½®é€»è¾‘
            })
            
            // ç¬¬ä¸‰ä¸ªæƒé™é€‰é¡¹
            Column() {
              Text('åœ¨å¤šä»»åŠ¡ç•Œé¢åŠ é”')
                .fontSize(18)
                .fontWeight(FontWeight.Medium)
                .fontColor('#03A9F4')
                .width('100%')
                .textAlign(TextAlign.Start)
                .margin({ bottom: 4 })
              
              Text('é˜²æ­¢è¢«ä¸€é”®æ¸…ç†')
                .fontSize(14)
                .fontColor('#666666')
                .width('100%')
                .textAlign(TextAlign.Start)
            }
            .width('100%')
            .backgroundColor('#E3F2FD')
            .borderRadius(8)
            .padding(16)
            .margin({ bottom: 16, left: 16, right: 16 })
            .onClick(() => {
              // å¤„ç†æƒé™è®¾ç½®é€»è¾‘
            })
            
            // åº•éƒ¨ç¡®è®¤æ–‡å­—
            Text('æƒé™å·²è®¾ç½®å®Œæˆï¼Œä¸å†æ˜¾ç¤ºæç¤º')
              .fontSize(16)
              .fontColor('#666666')
              .textAlign(TextAlign.Center)
              .margin({ bottom: 16 })
          }
          .width('90%')
          .backgroundColor('#FFFFFF')
          .borderRadius(16)
        }
        .width('100%')
        .height('100%')
        .backgroundColor('rgba(0, 0, 0, 0.5)')
        .justifyContent(FlexAlign.Center)
        .onClick(() => {
          // ç‚¹å‡»ç©ºç™½åŒºåŸŸä¸å…³é—­
        })
      }
      
      // ä¸“æ³¨æ—¶é•¿æ‰“å¡ç»Ÿè®¡
      if (this.isClockInStatsShow) {
        Column() {
          Column() {
            // é¡¶éƒ¨æ ‡é¢˜å’ŒæŒ‰é’®æ 
            Row() {
              Text('æ‰“å¡ | ä¿å­˜')
                .fontSize(18)
                .fontWeight(FontWeight.Bold)
                .fontColor('#000000')
              
              Blank()
              
              Row({ space: 12 }) {
                Text('âšª').fontSize(24)
                Text('â¬‡ï¸').fontSize(24)
                Text('ğŸ”„').fontSize(24)
                Text('ğŸ”„').fontSize(24)
                Text('âœ–ï¸').fontSize(24).onClick(() => {
                  this.isClockInStatsShow = false;
                })
              }
            }
            .width('100%')
            .padding({ left: 16, right: 16, top: 12, bottom: 12 })
            .border({ width: { bottom: 1 }, color: { bottom: '#EEEEEE' } })
            
            // æ—¥æœŸæ˜¾ç¤º
            Column({ space: 8 }) {
              Text('2025å¹´05æœˆ13æ—¥')
                .fontSize(32)
                .fontWeight(FontWeight.Bold)
                .fontColor('#000000')
              
              Row() {
                Text('å…±ä¸“æ³¨99å¤©')
                  .fontSize(14)
                  .fontColor('#FFFFFF')
                  .backgroundColor('#FF6B6B')
                  .borderRadius(16)
                  .padding({ left: 10, right: 10, top: 4, bottom: 4 })
                  .margin({ right: 8 })
                
                Text('è¿ç»­ä¸“æ³¨1å¤©')
                  .fontSize(14)
                  .fontColor('#FFFFFF')
                  .backgroundColor('#FFD166')
                  .borderRadius(16)
                  .padding({ left: 10, right: 10, top: 4, bottom: 4 })
              }
            }
            .width('100%')
            .padding({ left: 16, right: 16, top: 16, bottom: 16 })
            
            // è®¡æ—¶ç»Ÿè®¡
            Row() {
              Column() {
                Text('å½“æ—¥ä¸“æ³¨')
                  .fontSize(16)
                  .fontColor('#666666')
                  .margin({ bottom: 8 })
                
                Text('æ¬¡æ•°')
                  .fontSize(14)
                  .fontColor('#999999')
                  .margin({ bottom: 4 })
                
                Text('0')
                  .fontSize(34)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#000000')
              }
              .alignItems(HorizontalAlign.Center)
              .layoutWeight(1)
              
              Column() {
                Text('æ—¶é•¿')
                  .fontSize(14)
                  .fontColor('#999999')
                  .margin({ bottom: 4 })
                
                Row() {
                  Text('0')
                    .fontSize(34)
                    .fontWeight(FontWeight.Bold)
                    .fontColor('#000000')
                  Text('åˆ†é’Ÿ')
                    .fontSize(14)
                    .fontColor('#999999')
                    .alignSelf(ItemAlign.End)
                    .margin({ bottom: 6 })
                }
              }
              .alignItems(HorizontalAlign.Center)
              .layoutWeight(1)
            }
            .width('100%')
            .padding({ left: 16, right: 16, top: 10, bottom: 10 })
            
            // åˆ†å¸ƒå›¾/æ—¶é—´è½´åˆ‡æ¢
            Row() {
              Text('åˆ†å¸ƒå›¾')
                .fontSize(16)
                .fontColor('#8A2BE2')
                .fontWeight(FontWeight.Medium)
                .backgroundColor('#F0E6FF')
                .borderRadius(16)
                .padding({ left: 16, right: 16, top: 6, bottom: 6 })
                .width('50%')
                .textAlign(TextAlign.Center)
              
              Text('æ—¶é—´è½´')
                .fontSize(16)
                .fontColor('#666666')
                .fontWeight(FontWeight.Medium)
                .backgroundColor('#F5F5F5')
                .borderRadius(16)
                .padding({ left: 16, right: 16, top: 6, bottom: 6 })
                .width('50%')
                .textAlign(TextAlign.Center)
            }
            .width('85%')
            .height(40)
            .margin({ top: 10, bottom: 10 })
            .backgroundColor('#EFEFEF')
            .borderRadius(20)
            
            // æ—¶é•¿åˆ†å¸ƒç»Ÿè®¡æ ‡é¢˜
            Text('ä¸“æ³¨æ—¶é•¿åˆ†å¸ƒ 2025-05-13')
              .fontSize(16)
              .fontWeight(FontWeight.Medium)
              .fontColor('#333333')
              .alignSelf(ItemAlign.Start)
              .margin({ left: 16, top: 10, bottom: 10 })
            
            // ç»Ÿè®¡æ—¶é—´å‘¨æœŸåˆ‡æ¢
            Row() {
              Text('æ—¥')
                .fontSize(16)
                .fontColor('#8A2BE2')
                .fontWeight(FontWeight.Medium)
                .backgroundColor('#F0E6FF')
                .borderRadius(16)
                .padding({ left: 16, right: 16, top: 6, bottom: 6 })
              
              Text('å‘¨')
                .fontSize(16)
                .fontColor('#666666')
                .fontWeight(FontWeight.Medium)
                .backgroundColor('#F5F5F5')
                .borderRadius(16)
                .padding({ left: 16, right: 16, top: 6, bottom: 6 })
                .margin({ left: 8, right: 8 })
              
              Text('æœˆ')
                .fontSize(16)
                .fontColor('#666666')
                .fontWeight(FontWeight.Medium)
                .backgroundColor('#F5F5F5')
                .borderRadius(16)
                .padding({ left: 16, right: 16, top: 6, bottom: 6 })
              
              Text('è‡ªå®šä¹‰')
                .fontSize(16)
                .fontColor('#666666')
                .fontWeight(FontWeight.Medium)
                .backgroundColor('#F5F5F5')
                .borderRadius(16)
                .padding({ left: 16, right: 16, top: 6, bottom: 6 })
                .margin({ left: 8 })
            }
            .width('100%')
            .padding({ left: 16, right: 16, top: 10, bottom: 10 })
            .justifyContent(FlexAlign.Start)
            
            // ç»Ÿè®¡å›¾è¡¨ï¼ˆè¿™é‡Œç”¨ä¸€ä¸ªç©ºçš„å®¹å™¨è¡¨ç¤ºï¼Œå®é™…é¡¹ç›®ä¸­å¯æ›¿æ¢ä¸ºçœŸå®å›¾è¡¨ï¼‰
            Column() {
              Text('æš‚æ— ä¸“æ³¨æ•°æ®ï¼Œç‚¹å‡»å¾…åŠä¸Šçš„å¼€å§‹æŒ‰é’®æ¥å¼€å§‹ä½ çš„ä¸“æ³¨è®¡æ—¶å§')
                .fontSize(14)
                .fontColor('#999999')
                .textAlign(TextAlign.Center)
                .margin(16)
            }
            .width('100%')
            .height(200)
            .backgroundColor('#F8F8F8')
            .justifyContent(FlexAlign.Center)
            .alignItems(HorizontalAlign.Center)
            
            // åº•éƒ¨ä¿¡æ¯
            Text('å¤„å¤„ç•™å¿ƒçš†å­¦é—®.')
              .fontSize(14)
              .fontColor('#999999')
              .margin({ top: 16, bottom: 6 })
            
            Text('ä¹ æƒ¯å…»æˆ å­¦éœ¸å¿…å¤‡-ç•ªèŒ„TODO')
              .fontSize(12)
              .fontColor('#8A2BE2')
          }
          .width('100%')
          .backgroundColor('#FFFFFF')
          .borderRadius(16)
          .padding({ bottom: 16 })
        }
        .width('100%')
        .height('100%')
        .backgroundColor('rgba(0, 0, 0, 0.5)')
        .onClick(() => {
          // ç‚¹å‡»ç©ºç™½åŒºåŸŸå…³é—­å¼¹çª—
          this.isClockInStatsShow = false;
        })
      }

      // å¾…åŠé¡¹æ“ä½œèœå•
      if (this.isOperationMenuShow) {
        Column() {
          Column() {
            // é¡¶éƒ¨æ˜¾ç¤ºå¾…åŠå·ç 
            Row() {
              Text('22')
                .fontSize(30)
                .fontWeight(FontWeight.Bold)
                .fontColor('#000000')
                .margin({ left: 16 })
              
              Blank()
              
              Row({ space: 16 }) {
                Column() {
                  Text('â°')
                    .fontSize(26)
                    .fontColor('#03A9F4')
                  Text('å®šæ—¶æé†’/ä¸“æ³¨')
                    .fontSize(12)
                    .fontColor('#333333')
                    .margin({ top: 4 })
                }
                .alignItems(HorizontalAlign.Center)
                
                Column() {
                  Text('ğŸ–¼ï¸')
                    .fontSize(26)
                    .fontColor('#03A9F4')
                  Text('æ›´æ¢èƒŒæ™¯')
                    .fontSize(12)
                    .fontColor('#333333')
                    .margin({ top: 4 })
                }
                .alignItems(HorizontalAlign.Center)
                
                Column() {
                  Text('ğŸ“‹')
                    .fontSize(26)
                    .fontColor('#03A9F4')
                  Text('ç‹¬ç«‹ç™½åå•')
                    .fontSize(12)
                    .fontColor('#333333')
                    .margin({ top: 4 })
                }
                .alignItems(HorizontalAlign.Center)
                .margin({ right: 16 })
              }
            }
            .width('100%')
            .height(100)
            .backgroundColor('#FFFFFF')
            .padding({ top: 20 })
            
            // æ“ä½œæŒ‰é’®è¡Œ
            Row() {
              Button('ç¼–è¾‘')
                .fontSize(16)
                .fontColor('#03A9F4')
                .backgroundColor('#E1F5FE')
                .borderRadius(20)
                .height(40)
                .width('33.3%')
                .margin(5)
              
              Button('æ’åº | ç§»åŠ¨')
                .fontSize(16)
                .fontColor('#03A9F4')
                .backgroundColor('#E1F5FE')
                .borderRadius(20)
                .height(40)
                .width('33.3%')
                .margin(5)
              
              Button('åˆ é™¤')
                .fontSize(16)
                .fontColor('#FF5252')
                .backgroundColor('#FFEBEE')
                .borderRadius(20)
                .height(40)
                .width('33.3%')
                .margin(5)
                .onClick(() => {
                  // åˆ é™¤é€‰ä¸­çš„å¾…åŠé¡¹
                  if (this.selectedTodoId >= 0) {
                    const index = this.todoItems.findIndex(item => item.id === this.selectedTodoId);
                    if (index >= 0) {
                      this.todoItems.splice(index, 1);
                    }
                  }
                  this.isOperationMenuShow = false;
                })
            }
            .width('100%')
            .padding({ left: 10, right: 10, top: 10, bottom: 10 })
            
            // åŠŸèƒ½åŒºåŸŸ
            Row() {
              Column() {
                Text('ğŸ“Š')
                  .fontSize(32)
                  .fontColor('#03A9F4')
                Text('ä¸“æ³¨å†å²è®°å½•')
                  .fontSize(14)
                  .fontColor('#03A9F4')
                  .margin({ top: 8 })
              }
              .width('50%')
              .backgroundColor('#E1F5FE')
              .borderRadius(8)
              .padding(20)
              .margin(5)
              
              Column() {
                Text('ğŸ“ˆ')
                  .fontSize(32)
                  .fontColor('#03A9F4')
                Text('æ•°æ®ç»Ÿè®¡')
                  .fontSize(14)
                  .fontColor('#03A9F4')
                  .margin({ top: 8 })
              }
              .width('50%')
              .backgroundColor('#E1F5FE')
              .borderRadius(8)
              .padding(20)
              .margin(5)
            }
            .width('100%')
            .padding({ left: 10, right: 10 })
            
            // ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ
            Column() {
              Text('ç´¯è®¡ä¸“æ³¨')
                .fontSize(18)
                .fontWeight(FontWeight.Bold)
                .fontColor('#333333')
                .width('100%')
                .textAlign(TextAlign.Center)
                .margin({ top: 16, bottom: 16 })
              
              Row() {
                Text('0')
                  .fontSize(40)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#03A9F4')
                Text('æ¬¡')
                  .fontSize(16)
                  .fontColor('#666666')
                  .margin({ left: 4, bottom: 8 })
                  .alignSelf(ItemAlign.End)
              }
              .justifyContent(FlexAlign.Center)
              .width('50%')
              
              Row() {
                Text('0')
                  .fontSize(40)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#03A9F4')
                Text('åˆ†é’Ÿ')
                  .fontSize(16)
                  .fontColor('#666666')
                  .margin({ left: 4, bottom: 8 })
                  .alignSelf(ItemAlign.End)
              }
              .justifyContent(FlexAlign.Center)
              .width('50%')
            }
            .width('100%')
            .alignItems(HorizontalAlign.Center)
            
            // å®šæ—¶æé†’ä¿¡æ¯
            Column() {
              Text('å®šæ—¶æé†’ | å®šæ—¶å­¦éœ¸æ¨¡å¼')
                .fontSize(16)
                .fontWeight(FontWeight.Bold)
                .fontColor('#03A9F4')
                .width('100%')
                .textAlign(TextAlign.Center)
                .margin({ top: 16, bottom: 8 })
              
              Text('æ²¡æœ‰è®¾ç½®å®šæ—¶æé†’æˆ–å®šæ—¶å­¦éœ¸')
                .fontSize(14)
                .fontColor('#666666')
                .width('100%')
                .textAlign(TextAlign.Center)
                .margin({ bottom: 16 })
              
              Text('ç›®æ ‡æˆªæ­¢æ—¥æœŸ 2025-05-14 å‰©ä½™ 1å¤©')
                .fontSize(16)
                .fontWeight(FontWeight.Bold)
                .fontColor('#03A9F4')
                .width('100%')
                .textAlign(TextAlign.Center)
                .margin({ bottom: 16 })
              
              Row() {
                Column() {
                  Text('è®¡åˆ’å†…å·²å®Œæˆ')
                    .fontSize(12)
                    .fontColor('#666666')
                    .margin({ bottom: 4 })
                  
                  Row() {
                    Text('0')
                      .fontSize(24)
                      .fontWeight(FontWeight.Bold)
                      .fontColor('#333333')
                    Text('åˆ†é’Ÿ')
                      .fontSize(12)
                      .fontColor('#666666')
                      .alignSelf(ItemAlign.End)
                      .margin({ left: 4, bottom: 4 })
                  }
                }
                .width('33.3%')
                .alignItems(HorizontalAlign.Center)
                
                Column() {
                  Text('é•¿æœŸè®¡åˆ’å®Œæˆåº¦')
                    .fontSize(12)
                    .fontColor('#666666')
                    .margin({ bottom: 4 })
                  
                  Row() {
                    // åœ†å½¢è¿›åº¦æ¡ï¼ˆç®€åŒ–è¡¨ç¤ºï¼‰
                    Stack() {
                      Circle()
                        .width(50)
                        .height(50)
                        .fill('#EEEEEE')
                        .strokeWidth(5)
                        .stroke('#03A9F4')
                      
                      Text('0')
                        .fontSize(16)
                        .fontWeight(FontWeight.Bold)
                        .fontColor('#333333')
                    }
                  }
                }
                .width('33.3%')
                .alignItems(HorizontalAlign.Center)
                
                Column() {
                  Text('è®¡åˆ’æ€»æ•°')
                    .fontSize(12)
                    .fontColor('#666666')
                    .margin({ bottom: 4 })
                  
                  Row() {
                    Text('1980')
                      .fontSize(24)
                      .fontWeight(FontWeight.Bold)
                      .fontColor('#333333')
                    Text('åˆ†é’Ÿ')
                      .fontSize(12)
                      .fontColor('#666666')
                      .alignSelf(ItemAlign.End)
                      .margin({ left: 4, bottom: 4 })
                  }
                }
                .width('33.3%')
                .alignItems(HorizontalAlign.Center)
              }
              .width('100%')
              .padding({ left: 10, right: 10 })
              
              // åº•éƒ¨ä¿¡æ¯è¡Œ
              Row() {
                Text('ğŸ“…')
                  .fontSize(20)
                  .fontColor('#666666')
                Text('æ€»å…±åšæŒå¤©æ•°')
                  .fontSize(14)
                  .fontColor('#666666')
                  .margin({ left: 8 })
                
                Blank()
                
                Text('0 å¤©')
                  .fontSize(14)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#333333')
              }
              .width('100%')
              .padding({ left: 16, right: 16, top: 12, bottom: 12 })
              
              Row() {
                Text('ğŸ”„')
                  .fontSize(20)
                  .fontColor('#666666')
                Text('è¿ç»­åšæŒå¤©æ•°')
                  .fontSize(14)
                  .fontColor('#666666')
                  .margin({ left: 8 })
                
                Blank()
                
                Text('0 å¤©')
                  .fontSize(14)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#333333')
              }
              .width('100%')
              .padding({ left: 16, right: 16, top: 12, bottom: 12 })
              
              Row() {
                Text('ğŸ“')
                  .fontSize(20)
                  .fontColor('#666666')
                Text('åˆ›å»ºæ—¥æœŸ')
                  .fontSize(14)
                  .fontColor('#666666')
                  .margin({ left: 8 })
                
                Blank()
                
                Text('2025å¹´05æœˆ13æ—¥')
                  .fontSize(14)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#333333')
              }
              .width('100%')
              .padding({ left: 16, right: 16, top: 12, bottom: 24 })
            }
            .width('100%')
            .backgroundColor('#F5F5F5')
            .margin({ top: 16 })
          }
          .width('100%')
          .backgroundColor('#FFFFFF')
          .borderRadius({ topLeft: 16, topRight: 16 })
        }
        .width('100%')
        .height('90%')
        .position({ x: 0, y: '10%' })
        .backgroundColor('rgba(0, 0, 0, 0.5)')
        .onClick(() => {
          this.isOperationMenuShow = false;
        })
      }
    }
    .width('100%')
    .height('100%')
  }
}